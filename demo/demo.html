<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <title>摇一摇就有汉服哟</title>
    <style>
        a, abbr, address, article, aside, audio, b, blockquote, body, canvas, caption, cite, code, dd, del, details, dfn, dialog, div, dl, dt, em, fieldset, figcaption, figure, footer, form, h1, h2, h3, h4, h5, h6, header, hgroup, html, i, iframe, img, ins, kbd, label, legend, li, mark, menu, nav, object, ol, p, pre, q, samp, section, small, span, strong, sub, summary, sup, table, tbody, td, tfoot, th, thead, time, tr, ul, var, video {
            margin: 0;
            padding: 0;
        }

        .hand {
            position: absolute;
            top: 29%;
            left: 50%;
            width: 150px;
            height: 150px;
            margin: -75px 0 0 -75px;
        }

        .contain {
            background: #383a4c;
        }

        @-webkit-keyframes lasting {
            0%, 100% {
                transform: rotateZ(-30deg);
                -webkit-transform: rotateZ(-30deg);
            }
            50% {
                transform: rotateZ(30deg);
                -webkit-transform: rotateZ(30deg);
            }
        }

        .hand.lasting {
            animation: lasting 1s linear infinite;
            -webkit-animation: lasting 1s linear infinite;
        }

        /*#prize{*/
        /*position: absolute;*/
        /*width: 100%;*/
        /*top: 70%;*/
        /*text-align: center;*/
        /*visibility: hidden;*/
        /*}*/
        /*.shake_ui{*/
        /*margin-top:23%;*/
        /*margin-left:26%;*/

        /*}*/
        #prize {
            margin-top: 115%;
            margin-right: auto;
            margin-left: auto;
            width: 80%;
            height: 40px;
            background: #424458;
            border: 1px solid rgba(2, 2, 2, 0.28);
            border-radius: 3px;
            dropShadow: #343546;
            padding: 10px;
            line-height: 25px;
            text-aligh: center;
            color: #ec6941;
            corner: 10px;
            padding-top: 18px;
        }
    </style>
</head>
<body class="contain">
<p id="log"></p>
<p id="log3"></p>
<p id="log4"></p>
<p id="log5"></p>
<img id="hand" class="hand" src="images/hand.png">
<div id="prize" style="text-align: center">
    只有3次机会哦，把握好！！！
</div>
<p id="log2" style="color: #ecf0f1 ;text-align: center;display: none">只有3次机会哦，把握好！！！</p>
<p id="addMore" style="color: #ecf0f1 ;text-align: center;display: none">
    蓝瘦，555，没有机会了<a href="tel:15700112940" style="color: blue">点我试试？</a></p>
<script src="http://map.baidu.com/yyfm/yyshake/1.0.0/js/yyshake.min.js"></script>
<!--<script src="../yyshake.min.js"></script>-->
<script>
    (function () {
        var _compatModel = document.compatMode === "CSS1Compat";
        var bodyWrapper = document.querySelector("body");
        var hdom = document.documentElement;

        function reset() {
            var w_H = _compatModel ? hdom.clientHeight : document.body.clientHeight;
            var w_W = _compatModel ? hdom.clientWidth : document.body.clientWidth;
            bodyWrapper.style.height = w_H + "px";
        }

        document.addEventListener('DOMContentLoaded', reset);
        window.addEventListener('pageshow', reset);
        window.addEventListener('load', function () {
            reset();
            window.scrollTo(0, 0);
        });
        window.addEventListener('resize', function () {
            setTimeout(reset, 0);
        });
    })();

    function addClass(ele, name) {
        var o = ele.className;
        var os = o.split(" ");
        var r = os.some(function (e, i) {
            if (e == name)
                return true;
        });
        if (r) {
            return;
        }
        ele.className = o + " " + name;
    }

    function removeClass(ele, name) {
        var o = ele.className;
        var os = o.split(" ");
        os = os.filter(function (e) {
            if (e == name) {
                return false;
            } else {
                return true;
            }
        });
        ele.className = os.join(" ");
    }

    function $(s) {
        var ss = s.split(" ");
        if (ss[ss.length - 1].indexOf("#") === 0) {
            return document.querySelector(s);
        } else {
            return document.querySelectorAll(s);
        }
    }

    var hand = $("#hand");
    var prize = $("#prize");
    var time = 0;
    if (window.yyshake) {
        var callback = {
            begin: function () {
                // alert("begin");
                prize.style.visibility = "hidden";
                addClass(hand, "lasting");
            },
            end: function () {
                removeClass(hand, "lasting");
                document.getElementById("log2").style.display = "none";

                // alert(hand.className);
//                    var index = Math.floor(Math.random()*(prizes.length));
                if (time = 0) {

                    prize.innerHTML = "恭喜您获得了：一个温暖的拥抱!";
                    prize.style.visibility = "visible";

                }
                if (time = 1) {
                    prize.style.visibility = "hidden";

//                        document.getElementById("log2").innerHTML="还有1次机会，加油";
                    prize.innerHTML = "啥都没有，再接再厉!";
                    prize.style.visibility = "visible";

                }
                if (time = 2) {
                    prize.style.visibility = "hidden";

                    prize.innerHTML = "恭喜您获得了:获得了一套汉服!" +
                            '<a href="tel:15700112940" style="color: #fff">汉服领取处</a>';
                    prize.style.visibility = "visible";

                }
                time++;
                if (time >= 3) {
                    yyshake.stop();
                    prize.innerHTML = '蓝瘦，555，没有机会了<a href="tel:15700112940" style="color: #fff">点我领取机会！</a>'
                }
            }
        }
        window.yyshake.addListener(callback);
        yyshake.start();
    } else {
        alert("DeviceOrientation Not Supported!");
    }
</script>
</body>
</html>
